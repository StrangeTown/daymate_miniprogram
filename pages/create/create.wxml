<!--pages/create/create.wxml-->
<navigation-bar title="创建" back="{{true}}" color="black" background="#FFF"></navigation-bar>

<view class="create-container">
  <view class="form-section">
    <!-- Title Section -->
    <view class="section-part">
      <view class="section-header">
        <text class="section-title">名称</text>
      </view>
      <input
        class="input-field"
        type="text"
        placeholder="请输入名称"
        value="{{eventTitle}}"
        bindinput="onTitleInput"
      />
    </view>

    <!-- Marker Section -->
    <view wx:if="{{letters.length > 0}}" class="section-part">
      <view class="section-header">
        <text class="section-title">日历标记</text>
      </view>
      
      <!-- Letters Part -->
      <view class="marker-subsection">
        <view class="letters-list">
          <view
            wx:for="{{letters}}"
            wx:key="index"
            class="letter-item {{selectedLetter === item ? 'selected' : ''}} {{selectedImage ? 'disabled' : ''}}"
            bindtap="onLetterSelect"
            data-letter="{{item}}"
          >
            {{item}}
          </view>
        </view>
      </view>

      <!-- Separator -->
      <view class="marker-separator">
        <text class="marker-separator-text">或</text>
      </view>

      <!-- Images Part -->
      <view class="marker-subsection">
        <view class="images-list">
          <view
            wx:for="{{availableImages}}"
            wx:key="index"
            class="image-item {{selectedImage === item ? 'selected' : ''}} {{selectedLetter ? 'disabled' : ''}}"
            bindtap="onImageSelect"
            data-image="{{item}}"
          >
            <image class="event-image-preview" src="/{{item}}" mode="aspectFit"></image>
          </view>
        </view>
      </view>
    </view>

    <!-- Date Section -->
    <view class="section-part">
      <view class="section-header">
        <text class="section-title">日期</text>
      </view>
      <picker
        mode="date"
        value="{{eventDate}}"
        start="{{minDate}}"
        bindchange="onDateChange"
      >
        <view class="date-picker">
          <text class="date-text">{{eventDate || '请选择日期'}}</text>
          <text class="picker-icon">📅</text>
        </view>
      </picker>
    </view>
  </view>

  <view class="button-section">
    <button class="save-button" bindtap="onSaveEvent">保存</button>
  </view>
</view>