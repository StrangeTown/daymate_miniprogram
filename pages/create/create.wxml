<!--pages/create/create.wxml-->
<navigation-bar title="创建" back="{{true}}" color="black" background="#FFF"></navigation-bar>

<view class="create-container">
  <view class="form-section">
    <!-- Title Section -->
    <view class="section-part">
      <input
        class="input-field"
        type="text"
        placeholder="请输入事件名称"
        value="{{eventTitle}}"
        bindinput="onTitleInput"
      />

      <picker
        mode="date"
        value="{{eventDate}}"
        start="{{minDate}}"
        bindchange="onDateChange"
      >
        <view class="date-picker">
          <text class="date-text">{{eventDate || '请选择日期'}}</text>
          <text class="picker-icon">📅</text>
        </view>
      </picker>
    </view>

    <!-- Marker Section -->
    <view wx:if="{{letters.length > 0}}" class="section-part">
      <view class="section-header">
        <text class="section-title">日历标记</text>
      </view>
      
      <!-- Letters Part -->
      <view class="marker-subsection">
        <view class="letters-list">
          <view
            wx:for="{{letters}}"
            wx:key="index"
            class="letter-item {{selectedLetter === item ? 'selected' : ''}} {{selectedImage ? 'disabled' : ''}}"
            bindtap="onLetterSelect"
            data-letter="{{item}}"
          >
            {{item}}
          </view>
        </view>
      </view>

      <!-- Separator -->
      <view class="marker-separator"></view>

      <!-- Images Part -->
      <view class="marker-subsection">
        <scroll-view class="images-scroll" scroll-y="true" enable-flex="true">
          <view class="images-list">
            <view
              wx:for="{{availableImages}}"
              wx:key="index"
              class="image-item {{selectedImage === item.name ? 'selected' : ''}} {{selectedLetter ? 'disabled' : ''}}"
              bindtap="onImageSelect"
              data-image="{{item.name}}"
            >
              <image class="event-image-preview" src="/{{item.localAddress}}" mode="aspectFit"></image>
            </view>
          </view>
        </scroll-view>
      </view>

      <!-- Separator -->
      <view class="marker-separator"></view>

      <!-- GIF Part -->
      <view class="marker-subsection">
        <view class="gif-container">
          <scroll-view class="images-scroll gif-images-scroll" scroll-y="true" enable-flex="true">
            <view class="images-list">
              <view
                wx:for="{{availableGifs}}"
                wx:key="index"
                class="image-item {{selectedGif === item.name ? 'selected' : ''}} {{selectedImage || selectedLetter ? 'disabled' : ''}}"
                bindtap="onGifSelect"
                data-gif="{{item.name}}"
              >
                <image class="event-image-preview" src="/{{item.localAddress}}" mode="aspectFit"></image>
              </view>
            </view>
          </scroll-view>

          <!-- GIF Lock Overlay -->
          <view class="gif-overlay">
            <view class="lock-container">
              <text class="lock-icon">🔒</text>
              <view class="lock-tip">观看广告可以使用动态图标</view>
            </view>
          </view>
        </view>
      </view>

    </view>

    <!-- Subscribe Section -->
    <view class="section-part">
      <view class="section-header subscribe-header">
        <text class="section-title">前一天通知</text>
        <switch
          class="subscribe-switch"
          checked="{{enableNotification}}"
          bindchange="onNotificationToggle"
          color="#E96354"
        />
      </view>
    </view>
  </view>

  <view class="button-section">
    <button class="save-button" bindtap="onSaveEvent">保存</button>
  </view>
</view>